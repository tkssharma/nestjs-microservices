CREATE TABLE "USER" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "FNAME" VARCHAR(25) NOT NULL,
  "LNAME" VARCHAR(25) NOT NULL,
  "PERMISSIONS" VARCHAR(25) NOT NULL,
  "CONTACT_NUMBER" VARCHAR(10) NOT NULL,
  "EMAIL_ID" VARCHAR(50) UNIQUE NOT NULL,
  "PASSWORD" VARCHAR(25) NOT NULL
);

CREATE TABLE "FAVOURITE_RESTAURANT" (
  "USER_ID" INTEGER NOT NULL,
  "RESTAURANT_ID" INTEGER NOT NULL,
  PRIMARY KEY ("USER_ID", "RESTAURANT_ID")
);

CREATE TABLE "RESTAURANT" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "NAME" VARCHAR(25) NOT NULL,
  "DESCRIPTION" TEXT NOT NULL,
  "CUISINE" VARCHAR(25) NOT NULL,
  "CONTACT_NUMBER" VARCHAR(10) NOT NULL,
  "OPENS_AT" TIME NOT NULL,
  "CLOSES_AT" TIME NOT NULL,
  "DELIVERY_OPTION" BOOLEAN NOT NULL DEFAULT true,
  "PICKUP_OPTION" BOOLEAN NOT NULL,
  "RESTAURANT_IMAGE_URL" VARCHAR(500)
);

CREATE TABLE "RESTAURANT_ADDRESS" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "RESTAURANT_ID" INTEGER NOT NULL,
  "HOUSE_NUMBER" VARCHAR(25) NOT NULL,
  "STREET" VARCHAR(25) NOT NULL,
  "CITY" VARCHAR(25) NOT NULL,
  "STATE" VARCHAR(25) NOT NULL,
  "COUNTRY" VARCHAR(25) NOT NULL,
  "PINCODE" VARCHAR(6) NOT NULL
);

CREATE TABLE "DISH" (
  "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "RESTAURANT_ID" INTEGER NOT NULL,
  "NAME" VARCHAR(25) NOT NULL,
  "DESCRIPTION" TEXT NOT NULL,
  "PRICE" INTEGER NOT NULL,
  "CATEGORY" VARCHAR(25) NOT NULL,
  "FOOD_TYPE" VARCHAR(25) NOT NULL,
  "INGREDIENTS" TEXT NOT NULL,
  "DISH_IMAGE_URL" VARCHAR(500)
);

CREATE TABLE "FAVOURITE_DISH" (
  "USER_ID" INTEGER NOT NULL,
  "DISH_ID" INTEGER NOT NULL,
  PRIMARY KEY ("USER_ID", "DISH_ID")
);

ALTER TABLE "FAVOURITE_RESTAURANT" ADD FOREIGN KEY ("RESTAURANT_ID") REFERENCES "RESTAURANT" ("ID");

ALTER TABLE "FAVOURITE_RESTAURANT" ADD FOREIGN KEY ("USER_ID") REFERENCES "USER" ("ID");

ALTER TABLE "RESTAURANT_ADDRESS" ADD FOREIGN KEY ("RESTAURANT_ID") REFERENCES "RESTAURANT" ("ID");

ALTER TABLE "DISH" ADD FOREIGN KEY ("RESTAURANT_ID") REFERENCES "RESTAURANT" ("ID");

ALTER TABLE "FAVOURITE_DISH" ADD FOREIGN KEY ("DISH_ID") REFERENCES "DISH" ("ID");

ALTER TABLE "FAVOURITE_DISH" ADD FOREIGN KEY ("USER_ID") REFERENCES "USER" ("ID");
